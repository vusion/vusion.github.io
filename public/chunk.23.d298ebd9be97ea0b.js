webpackJsonp([23],{498:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("u-article",[e("h1",[s._v("组件化")]),e("h3",[s._v("完全组件化")]),e("p",[s._v("在Vusion理念中，我们将用户界面中的每个功能完备的结构单元称为"),e("strong",[s._v("组件")]),s._v("。")]),e("p",[s._v("这里的“功能完备”不仅仅指模板（HTML）、样式（CSS）和逻辑（JS），还包括所依赖的资源、文档、单元测试等，我们把这称为"),e("strong",[s._v("组件化的完备性")]),s._v("。")]),e("p",[s._v("传统的一些前端项目，目录结构会按照"),e("code",{pre:!0},[s._v("html")]),s._v("、"),e("code",{pre:!0},[s._v("css")]),s._v("、"),e("code",{pre:!0},[s._v("js")]),s._v("、"),e("code",{pre:!0},[s._v("docs")]),s._v("、"),e("code",{pre:!0},[s._v("test")]),s._v("来分，这样常常导致路径引用很深、文件没有分治、目录结构混乱、组件无法单独抽取等问题。")]),e("p",[s._v("而在Vusion中，我们采取"),e("strong",[s._v("一个组件一个地方")]),s._v("的原则。")]),e("h4",[s._v("单文件组件")]),e("p",[s._v("我们将Vue原生的单文件组件做了扩展。比如一个"),e("code",{pre:!0},[s._v("u-select.vue")]),s._v("文件：")]),e("pre",{pre:!0,attrs:{class:"hljs lang-xhtml"}},[e("code",{attrs:{"v-pre":""}},[e("span",{attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),e("span",{attrs:{class:"hljs-tag"}},[s._v("</"),e("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("               "),e("span",{attrs:{class:"hljs-comment"}},[s._v("\x3c!-- 组件模板 --\x3e")]),s._v("\n"),e("span",{attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),e("span",{attrs:{class:"undefined"}}),e("span",{attrs:{class:"hljs-tag"}},[s._v("</"),e("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("                   "),e("span",{attrs:{class:"hljs-comment"}},[s._v("\x3c!-- 组件逻辑 --\x3e")]),s._v("\n"),e("span",{attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(" "),e("span",{attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(">")]),e("span",{attrs:{class:"undefined"}}),e("span",{attrs:{class:"hljs-tag"}},[s._v("</"),e("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(">")]),s._v("              "),e("span",{attrs:{class:"hljs-comment"}},[s._v("\x3c!-- 组件样式 --\x3e")]),s._v("\n"),e("span",{attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{attrs:{class:"hljs-name"}},[s._v("test")]),s._v(">")]),e("span",{attrs:{class:"hljs-tag"}},[s._v("</"),e("span",{attrs:{class:"hljs-name"}},[s._v("test")]),s._v(">")]),s._v("                       "),e("span",{attrs:{class:"hljs-comment"}},[s._v("\x3c!-- 单元测试 --\x3e")]),s._v("\n"),e("span",{attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{attrs:{class:"hljs-name"}},[s._v("docs")]),s._v(">")]),e("span",{attrs:{class:"hljs-tag"}},[s._v("</"),e("span",{attrs:{class:"hljs-name"}},[s._v("docs")]),s._v(">")]),s._v("                       "),e("span",{attrs:{class:"hljs-comment"}},[s._v("\x3c!-- 组件文档 --\x3e")]),s._v("\n"),e("span",{attrs:{class:"hljs-tag"}},[s._v("<"),e("span",{attrs:{class:"hljs-name"}},[s._v("changelog")]),s._v(">")]),e("span",{attrs:{class:"hljs-tag"}},[s._v("</"),e("span",{attrs:{class:"hljs-name"}},[s._v("changelog")]),s._v(">")]),s._v("             "),e("span",{attrs:{class:"hljs-comment"}},[s._v("\x3c!-- 修改日志 --\x3e")]),s._v("\n")])]),e("p",[s._v("除了原来的"),e("code",{pre:!0},[s._v("<template>")]),s._v("、"),e("code",{pre:!0},[s._v("<script>")]),s._v("、"),e("code",{pre:!0},[s._v("<style>")]),s._v("三个标签，还利用"),e("u-link",{attrs:{href:"https://github.com/vuejs/vue-loader"}},[s._v("vue-loader")]),s._v("的"),e("u-link",{attrs:{href:"https://vue-loader.vuejs.org/zh-cn/configurations/custom-blocks.html"}},[s._v("自定义块")]),s._v("功能增加了"),e("code",{pre:!0},[s._v("<test>")]),s._v("、"),e("code",{pre:!0},[s._v("<docs>")]),s._v("、"),e("code",{pre:!0},[s._v("<changelog>")]),s._v("三个标签。")],1),e("h4",[s._v("多文件组件")]),e("p",[s._v("但有时单文件可以支持的功能还是有些薄弱，比如无法放置资源，因此我们创造了"),e("u-link",{attrs:{href:"https://github.com/vusion/vue-multifile-loader"}},[s._v("vue-multifile-loader")]),s._v("，它与"),e("code",{pre:!0},[s._v("vue-loader")]),s._v("的功能时时保持同步。")],1),e("p",[s._v("这样，一个Vue组件可以采用如下方式书写：")]),e("pre",{pre:!0},[e("code",{attrs:{"v-pre":""}},[s._v("u-select.vue/index.html             # 组件模板\nu-select.vue/index.js               # 组件逻辑\nu-select.vue/module.css             # 组件样式\nu-select.vue/icons/arrow-down.svg   # 相关资源\nu-select.vue/test.spec.js           # 单元测试\nu-select.vue/README.md              # 组件文档\nu-select.vue/CHANGELOG.md           # 修改日志\nu-select.vue/package.json           # npm包信息\n")])]),e("h4",[s._v("单文件组件 vs 多文件组件")]),e("p",[s._v("那么为什么要同时支持两种书写方式呢？")]),e("p",[s._v("主要是因为两种书写方式各有特色。单文件组件创建起来比较快捷，也是Vue原生的特色，适用于书写业务模块；而多文件组件在功能上支持的更多，适用于构造通用组件，方便扩展。")]),e("p",[s._v("Webpack的模块引入字符串可以将"),e("code",{pre:!0},[s._v("index.js")]),s._v("部分省略，因此两种书写方式都可以写作"),e("code",{pre:!0},[s._v("import Select from 'u-select.vue'")]),s._v("，这样便不会对依赖模块有所影响。")]),e("p",[s._v("一般来说，单文件组件的功能是多文件组件的功能的子集。如果一个组件没有使用到那些额外的功能的话，我们认为两种书写方式是"),e("strong",[s._v("等效")]),s._v("的。")]),e("p",[s._v("所以Vusion CLI提供一个"),e("code",{pre:!0},[s._v("transform")]),s._v("的命令，可以将组件在两者之间互相转换。")]),e("pre",{pre:!0,attrs:{class:"hljs lang-shell"}},[e("code",{attrs:{"v-pre":""}},[s._v("vusion transform ./src/u-select.vue\n")])]),e("h3",[s._v("组件的分类")]),e("p",[s._v("在一个项目中，一般可以将组件分类两类：")]),e("ul",[e("li",[e("strong",[s._v("通用组件（common）")]),s._v("：在项目中多个模块中可能用到的组件。推荐在Vue中进行全局注册，并进行统一管理。"),e("pre",{pre:!0,attrs:{class:"hljs lang-javascript"}},[e("code",{attrs:{"v-pre":""}},[s._v("Vue.component("),e("span",{attrs:{class:"hljs-string"}},[s._v("'u-select'")]),s._v(", Select);\n")])])]),e("li",[e("strong",[s._v("特定组件（specific）")]),s._v("：在项目中仅仅个别模块用到的组件。为了减少全局污染，推荐用Vue的"),e("code",{pre:!0},[s._v("components")]),s._v("选项进行局部注册。"),e("pre",{pre:!0,attrs:{class:"hljs lang-javascript"}},[e("code",{attrs:{"v-pre":""}},[e("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),e("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),e("span",{attrs:{class:"hljs-attr"}},[s._v("components")]),s._v(": {\n        "),e("span",{attrs:{class:"hljs-string"}},[s._v("'s-task-detail'")]),s._v(": TaskDetail,\n    },\n};\n")])])])]),e("h3",[s._v("组件的扩展与继承")]),e("p",[s._v("在Vue中，可以使用"),e("code",{pre:!0},[s._v("extend")]),s._v("或"),e("code",{pre:!0},[s._v("mixin")]),s._v("对组件进行扩展与继承。")]),e("p",[s._v("例如表单控件都有一些验证、反馈、限制等共有的特性，这时我们可以将这些特性抽取为一个基类组件"),e("code",{pre:!0},[s._v("u-field")]),s._v("，然后让"),e("code",{pre:!0},[s._v("u-input")]),s._v("、"),e("code",{pre:!0},[s._v("u-select")]),s._v("、"),e("code",{pre:!0},[s._v("u-date-picker")]),s._v("等从这个基组件派生。")]),e("p",[s._v("在完全模块化之后，组件的依赖关系只能走JS路线。如果要想给一个组件库中的组件"),e("code",{pre:!0},[s._v("u-select")]),s._v("复写样式或者添加属性，就需要从这个组件派生出一个新的也叫"),e("code",{pre:!0},[s._v("u-select")]),s._v("的组件，然后在全局注册中将原来的组件覆盖掉。")]),e("p",[s._v("为了方便描述，我们把后一种同名派生称为"),e("strong",[s._v("扩展")]),s._v("，把前一种异名派生称为"),e("strong",[s._v("继承")]),s._v("。")]),e("h4",[s._v("扩展与继承的策略")]),e("p",[s._v("为了简便，在组件扩展或继承时，如果模板、样式和逻辑等一些功能块没有发生变化，可以省略。")]),e("p",[s._v("下表为几种功能块省略或未省略时的扩展与继承策略。")]),e("table",[e("thead",[e("tr",[e("th"),e("th",[s._v("逻辑（JS）")]),e("th",[s._v("模板（HTML）")]),e("th",[s._v("样式（CSS）")]),e("th",[s._v("文档（Docs）")])])]),e("tbody",[e("tr",[e("td",[s._v("省略")]),e("td",[e("em",[s._v("报错")])]),e("td",[s._v("与基组件一致")]),e("td",[s._v("与基组件一致")]),e("td",[s._v("与基组件一致")])]),e("tr",[e("td",[s._v("未省略")]),e("td",[s._v("Vue的Mixin策略")]),e("td",[s._v("\b 覆盖")]),e("td",[s._v("补充/合并/重写")]),e("td",[s._v("覆盖")])])])]),e("p",[s._v("正因为Vusion针对组件提供了如此灵活的扩展与继承机制，所以它支持组件库的任意组合与衍生，提高了组件库的适用性，下一节将会描述它是如何办到的。")])])},staticRenderFns:[]},a=e(1)(null,v,!1,null,null,null);t.default=a.exports}});