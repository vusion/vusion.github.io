"undefined"==typeof window||window.ICON_FONT_STYLE?"undefined"!=typeof window&&window.ICON_FONT_STYLE&&window.ICON_FONT_STYLE.update&&window.ICON_FONT_STYLE.update({fontName:"vusion-icon-font",styleContent:'@font-face {\n\tfont-family: "vusion-icon-font";\n\tsrc:url("/public/vusion-icon-font.ttf?c6e4ff088ee6c0a07f348d6a7575883f") format("truetype"),\n\turl("/public/vusion-icon-font.eot?c6e4ff088ee6c0a07f348d6a7575883f#iefix") format("embedded-opentype"),\n\turl("/public/vusion-icon-font.woff?c6e4ff088ee6c0a07f348d6a7575883f") format("woff"),\n\turl("/public/vusion-icon-font.svg?c6e4ff088ee6c0a07f348d6a7575883f#vusion-icon-font") format("svg");\n}'}):window.ICON_FONT_STYLE={fontName:"vusion-icon-font",styleContent:'@font-face {\n\tfont-family: "vusion-icon-font";\n\tsrc:url("/public/vusion-icon-font.ttf?c6e4ff088ee6c0a07f348d6a7575883f") format("truetype"),\n\turl("/public/vusion-icon-font.eot?c6e4ff088ee6c0a07f348d6a7575883f#iefix") format("embedded-opentype"),\n\turl("/public/vusion-icon-font.woff?c6e4ff088ee6c0a07f348d6a7575883f") format("woff"),\n\turl("/public/vusion-icon-font.svg?c6e4ff088ee6c0a07f348d6a7575883f#vusion-icon-font") format("svg");\n}'},webpackJsonp([0],{438:function(s,a,t){var l="ICON-FONT-FILE-STYLE";function n(s){return(s||window.ICON_FONT_STYLE).styleContent||""}function r(s){var a=document.createElement("style"),t=document.getElementsByTagName("head")[0];a.innerHTML=n(s),a.id=l,a.type="text/css",t?t.appendChild(a):window.addEventListener("load",function(){t.appendChild(a)})}s.exports=function(){window.HAS_CREATE_FONT_STYLE||(r(),window.HAS_CREATE_FONT_STYLE=!0)}},446:function(s,a,t){var l=t(447);"string"==typeof l&&(l=[[s.i,l,""]]),l.locals&&(s.exports=l.locals);t(440)("69049929",l,!0,{})},447:function(s,a,t){(a=s.exports=t(439)(!1)).push([s.i,"._3-2FxdbJjsObz9bw{display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:18px;height:18px;line-height:16px;border:1px solid #ccc;text-align:center;color:#1ba67e}",""]),a.locals={root:"_3-2FxdbJjsObz9bw"}},448:function(s,a,t){var l=t(449);"string"==typeof l&&(l=[[s.i,l,""]]),l.locals&&(s.exports=l.locals);t(440)("1f16d8ab",l,!0,{})},449:function(s,a,t){(a=s.exports=t(439)(!1)).push([s.i,"._3OvodpsKHyioeA15{display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:18px;height:18px;line-height:16px;border:1px solid #ccc;text-align:center;color:#1ba67e}",""]),a.locals={root:"_3OvodpsKHyioeA15"}},450:function(s,a,t){var l=t(451);"string"==typeof l&&(l=[[s.i,l,""]]),l.locals&&(s.exports=l.locals);t(440)("0780f4d2",l,!0,{})},451:function(s,a,t){(a=s.exports=t(439)(!1)).push([s.i,"._1IrwwQnHbRP9RqbK{display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:18px;height:18px;line-height:16px;border:1px solid #ccc;text-align:center;color:#1ba67e}",""]),a.locals={root:"_1IrwwQnHbRP9RqbK"}},452:function(s,a,t){var l=t(453);"string"==typeof l&&(l=[[s.i,l,""]]),l.locals&&(s.exports=l.locals);t(440)("64e6d70a",l,!0,{})},453:function(s,a,t){(a=s.exports=t(439)(!1)).push([s.i,"._1x2Jsm5oqGVMkVYI{display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:18px;height:18px;line-height:16px;border:1px solid #ccc;text-align:center;color:#1ba67e}",""]),a.locals={checkbox:"_1x2Jsm5oqGVMkVYI"}},454:function(s,a,t){var l=t(455);"string"==typeof l&&(l=[[s.i,l,""]]),l.locals&&(s.exports=l.locals);t(440)("42c79bc2",l,!0,{})},455:function(s,a,t){(a=s.exports=t(439)(!1)).push([s.i,".U155ndJ_69PraE3n{display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:18px;height:18px;line-height:16px;border:1px solid #ccc;text-align:center;color:#1ba67e}",""]),a.locals={checkbox:"U155ndJ_69PraE3n"}},456:function(s,a,t){var l=t(457);"string"==typeof l&&(l=[[s.i,l,""]]),l.locals&&(s.exports=l.locals);t(440)("ea5d9e02",l,!0,{})},457:function(s,a,t){(a=s.exports=t(439)(!1)).push([s.i,"._3ho1bQ-V8DRWFYsj{display:inline-block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:18px;height:18px;line-height:16px;border:1px solid #ccc;text-align:center;color:#1ba67e}",""]),a.locals={root:"_3ho1bQ-V8DRWFYsj"}},458:function(s,a,t){var l=t(459);"string"==typeof l&&(l=[[s.i,l,""]]),l.locals&&(s.exports=l.locals);t(440)("13159c90",l,!0,{})},459:function(s,a,t){(a=s.exports=t(439)(!1)).push([s.i,"._36NGT-hM-MCj9aud{width:60px}",""]),a.locals={root:"DPaIz7vbSv9aCOL8",input:"_36NGT-hM-MCj9aud"}},460:function(s,a,t){var l=t(461);"string"==typeof l&&(l=[[s.i,l,""]]),l.locals&&(s.exports=l.locals);t(440)("63b656ba",l,!0,{})},461:function(s,a,t){(a=s.exports=t(439)(!1)).push([s.i,".PDSulDRBy8iMnW0S{width:60px}",""]),a.locals={root:"_1rqWVskUVnYa5G2j",input:"PDSulDRBy8iMnW0S"}},491:function(s,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l={render:function(){var s=this.$createElement,a=this._self._c||s;return a("u-form",{attrs:{rules:this.rules}},[a("u-form-item",{attrs:{label:"用户名",name:"username"}},[a("u-input",{attrs:{maxlength:"12",placeholder:"4~12个字符"}})],1),a("u-form-item",{attrs:{label:"邮箱",name:"email"}},[a("u-input",{attrs:{maxlength:"24",placeholder:"请输入邮箱"}})],1)],1)},staticRenderFns:[]},n=t(1)({data:function(){return{rules:{username:[{type:"string",required:!0,trigger:"blur",message:"请输入用户名"},{type:"string",min:4,max:12,trigger:"blur",message:"请输入4~12个字符"}],email:[{type:"string",required:!0,trigger:"blur",message:"请输入邮箱"},{type:"email",trigger:"blur",message:"邮箱格式不正确"}]}}}},l,!1,null,null,null).exports,r={data:function(){var s=this;return{model:{password:"",confirm:""},rules:{password:[{type:"string",required:!0,trigger:"blur",message:"请输入密码"},{type:"string",min:6,max:12,trigger:"blur",message:"6~12个字符"}],confirm:[{type:"string",required:!0,trigger:"blur",message:"两次输入的密码不一致",validator:function(a,t,l){t===s.model.password?l():l(new Error)}}]}}}},v={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("u-form",{attrs:{rules:s.rules}},[t("u-form-item",{attrs:{label:"密码",name:"password"}},[t("u-input",{attrs:{type:"password",maxlength:"12",placeholder:"6~12个字符"},model:{value:s.model.password,callback:function(a){s.$set(s.model,"password",a)},expression:"model.password"}})],1),t("u-form-item",{attrs:{label:"确认密码",name:"confirm"}},[t("u-input",{attrs:{type:"password",maxlength:"12",placeholder:"6~12个字符"},model:{value:s.model.confirm,callback:function(a){s.$set(s.model,"confirm",a)},expression:"model.confirm"}})],1),t("u-form-item",[t("u-button",[s._v("设置")])],1)],1)},staticRenderFns:[]},e=t(1)(r,v,!1,null,null,null).exports,_={data:function(){return{rules:{username:[{type:"string",required:!0,trigger:"blur",message:"请输入用户名"},{type:"string",min:4,max:12,trigger:"blur",message:"请输入4~12个字符"},{type:"string",required:!0,trigger:"blur",message:"该用户名已被使用",validator:function(s,a,t){var l;(l=a,new Promise(function(s,a){["aaaa","abcd","1234"].includes(l)?a("该用户名已被使用"):s()})).then(function(){return t()}).catch(function(s){return t(new Error(s))})}}]}}}},p={render:function(){var s=this.$createElement,a=this._self._c||s;return a("u-form",{attrs:{rules:this.rules}},[a("u-form-item",{attrs:{label:"用户名",name:"username"}},[a("u-input",{attrs:{maxlength:"12",placeholder:"4~12个字符"}})],1)],1)},staticRenderFns:[]},c=t(1)(_,p,!1,null,null,null).exports,h={data:function(){return{rules:{username:[{type:"string",required:!0,message:"请输入用户名"},{type:"string",min:4,max:12,message:"请输入4~12个字符"}],email:[{type:"string",required:!0,message:"请输入邮箱"},{type:"email",message:"邮箱格式不正确"}]}}},methods:{submit:function(){this.$refs.form.validate().then(function(){return alert("提交成功")}).catch(function(){})}}},i={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("u-form",{ref:"form",attrs:{rules:s.rules}},[t("u-form-item",{attrs:{label:"用户名",name:"username"}},[t("u-input",{attrs:{maxlength:"12",placeholder:"4~12个字符"}})],1),t("u-form-item",{attrs:{label:"邮箱",name:"email"}},[t("u-input",{attrs:{maxlength:"24",placeholder:"请输入邮箱"}})],1),t("u-form-item",[t("u-button",{attrs:{color:"primary"},on:{click:function(a){s.submit()}}},[s._v("提交")])],1)],1)},staticRenderFns:[]},u=t(1)(h,i,!1,null,null,null).exports,j={render:function(){var s=this.$createElement,a=this._self._c||s;return a("u-form",{ref:"form",attrs:{rules:this.rules}},[a("u-form-item",{attrs:{label:"用户名",name:"username"}},[a("u-input",{attrs:{maxlength:"12",placeholder:"4~12个字符"}})],1),a("u-form-item",{attrs:{label:"邮箱",name:"email"}},[a("u-input",{attrs:{maxlength:"24",placeholder:"请输入邮箱"}})],1)],1)},staticRenderFns:[]},o=t(1)({data:function(){return{rules:{username:[{type:"string",required:!0,trigger:"blur",message:"请输入用户名"},{type:"string",min:4,max:12,trigger:"blur",message:"请输入4~12个字符"}],email:[{type:"string",required:!0,trigger:"blur",message:"请输入邮箱"},{type:"email",trigger:"blur",message:"邮箱格式不正确"}]}}}},j,!1,null,null,null).exports,m={render:function(){var s=this.$createElement,a=this._self._c||s;return a("u-form",{ref:"form",attrs:{rules:this.rules}},[a("u-form-item",{attrs:{label:"用户名",name:"username"}},[a("u-input",{attrs:{maxlength:"12",placeholder:"4~12个字符"}})],1),a("u-form-item",{attrs:{label:"邮箱",name:"email"}},[a("u-input",{attrs:{maxlength:"24",placeholder:"请输入邮箱"}})],1)],1)},staticRenderFns:[]},g=t(1)({data:function(){return{rules:{username:[{type:"string",required:!0,trigger:"blur",message:"请输入用户名"},{type:"string",min:4,max:12,trigger:"input+blur",message:"请输入4~12个字符"}],email:[{type:"string",required:!0,trigger:"blur",message:"请输入邮箱"},{type:"email",trigger:"input",message:"邮箱格式不正确"}]}}}},m,!1,null,null,null).exports,d={render:function(){var s=this.$createElement;return(this._self._c||s)("div",{class:this.$style.root},[this._v("✓")])},staticRenderFns:[]},f={};var b=t(1)({name:"e-checkbox"},d,!1,function(s){f.$style=t(446),this.$style=f.$style},null,null).exports,y={name:"e-checkbox",props:{value:{type:Boolean,default:!0}}},x={render:function(){var s=this,a=s.$createElement;return(s._self._c||a)("div",{class:s.$style.root,on:{click:function(a){s.value=!s.value}}},[s._v(s._s(s.value?"✓":" "))])},staticRenderFns:[]},k={};var w=t(1)(y,x,!1,function(s){k.$style=t(448),this.$style=k.$style},null,null).exports,$={name:"e-checkbox",props:{value:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value}},watch:{value:function(s){this.currentValue=s}}},C={render:function(){var s=this,a=s.$createElement;return(s._self._c||a)("div",{class:s.$style.root,on:{click:function(a){s.currentValue=!s.currentValue}}},[s._v(s._s(s.currentValue?"✓":" "))])},staticRenderFns:[]},V={};var F=t(1)($,C,!1,function(s){V.$style=t(450),this.$style=V.$style},null,null).exports,q={components:{"e-checkbox":{template:"<div @click=\"check()\">{{ currentValue ? '✓' : '&nbsp;' }}</div>",props:{value:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value}},watch:{value:function(s){this.currentValue=s}},methods:{check:function(){var s=this.currentValue=!this.currentValue;this.$emit("input",s),this.$emit("update:value",s)}}}},data:function(){return{checked:!1}}},E={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",[t("div",[s._v("复选框："),t("e-checkbox",{class:s.$style.checkbox,model:{value:s.checked,callback:function(a){s.checked=a},expression:"checked"}})],1),t("div",[s._v("绑定值："+s._s(s.checked))])])},staticRenderFns:[]},I={};var B=t(1)(q,E,!1,function(s){I.$style=t(452),this.$style=I.$style},null,null).exports,R=t(146),N={components:{"e-checkbox":{mixins:[R.Field],template:"<div @click=\"check()\">{{ currentValue ? '✓' : '&nbsp;' }}</div>",props:{value:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value}},watch:{value:function(s){this.currentValue=s}},methods:{check:function(){var s=this.currentValue=!this.currentValue;this.$emit("input",s),this.$emit("update:value",s)}}}},data:function(){return{rules:[{type:"boolean",required:!0,trigger:"input",message:"您还未接受服务条款",validator:function(s,a,t){a?t():t(new Error(!1))}}]}}},T={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("u-form",{ref:"form"},[t("u-form-item",{attrs:{label:"复选框",required:"",rules:s.rules}},[t("e-checkbox",{class:s.$style.checkbox}),s._v(" 同意并遵守服务条款\n    ")],1),t("u-form-item",[t("u-button",{attrs:{color:"primary"},on:{click:function(a){s.$refs.form.validate()}}},[s._v("提交")])],1)],1)},staticRenderFns:[]},P={};var S=t(1)(N,T,!1,function(s){P.$style=t(454),this.$style=P.$style},null,null).exports,O={name:"e-checkbox",mixins:[R.Field],props:{value:{type:Boolean,default:!1}},data:function(){return{currentValue:this.value}},watch:{value:function(s){this.currentValue=s}},methods:{onFocus:function(s){this.$emit("focus",s)},onBlur:function(s){this.$emit("blur",s)},check:function(){var s=this.currentValue=!this.currentValue;this.$emit("input",s),this.$emit("update:value",s)}}},z={render:function(){var s=this,a=s.$createElement;return(s._self._c||a)("div",{class:s.$style.root,attrs:{tabindex:"0"},on:{click:function(a){s.check()},keydown:function(a){if(!("button"in a)&&s._k(a.keyCode,"space",32,a.key," "))return null;a.preventDefault()},keyup:function(a){if(!("button"in a)&&s._k(a.keyCode,"space",32,a.key," "))return null;a.preventDefault(),s.check()},focus:s.onFocus,blur:s.onBlur}},[s._v(s._s(s.currentValue?"✓":" "))])},staticRenderFns:[]},A={};var Y=t(1)(O,z,!1,function(s){A.$style=t(456),this.$style=A.$style},null,null).exports,L={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{class:s.$style.root},[t("u-input",{class:s.$style.input,attrs:{maxlength:"3"}}),s._v(" .\n    "),t("u-input",{class:s.$style.input,attrs:{maxlength:"3"}}),s._v(" .\n    "),t("u-input",{class:s.$style.input,attrs:{maxlength:"3"}}),s._v(" .\n    "),t("u-input",{class:s.$style.input,attrs:{maxlength:"3"}})],1)},staticRenderFns:[]},M={};var D=t(1)({name:"e-ip-input"},L,!1,function(s){M.$style=t(458),this.$style=M.$style},null,null).exports,H={name:"e-ip-input",props:{value:String},data:function(){return{parts:[]}},watch:{value:function(s){this.parts=s.split(".")}}},J={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{class:s.$style.root},[t("u-input",{class:s.$style.input,attrs:{maxlength:"3"},model:{value:s.parts[0],callback:function(a){s.$set(s.parts,0,a)},expression:"parts[0]"}}),s._v(" .\n    "),t("u-input",{class:s.$style.input,attrs:{maxlength:"3"},model:{value:s.parts[1],callback:function(a){s.$set(s.parts,1,a)},expression:"parts[1]"}}),s._v(" .\n    "),t("u-input",{class:s.$style.input,attrs:{maxlength:"3"},model:{value:s.parts[2],callback:function(a){s.$set(s.parts,2,a)},expression:"parts[2]"}}),s._v(" .\n    "),t("u-input",{class:s.$style.input,attrs:{maxlength:"3"},model:{value:s.parts[3],callback:function(a){s.$set(s.parts,3,a)},expression:"parts[3]"}})],1)},staticRenderFns:[]},G={};var W=t(1)(H,J,!1,function(s){G.$style=t(460),this.$style=G.$style},null,null).exports,Z={components:{"e-ip-input":{template:'<div style="display: inline-block">\n                <u-input maxlength="3" v-model="parts[0]" @input="onInput()" style="width: 60px"></u-input> .\n                <u-input maxlength="3" v-model="parts[1]" @input="onInput()" style="width: 60px"></u-input> .\n                <u-input maxlength="3" v-model="parts[2]" @input="onInput()" style="width: 60px"></u-input> .\n                <u-input maxlength="3" v-model="parts[3]" @input="onInput()" style="width: 60px"></u-input>\n            </div>',props:{value:String},data:function(){return{parts:[]}},watch:{value:function(s){this.parts=s.split(".")}},methods:{onInput:function(){var s=this.parts.join(".");this.$emit("input",s),this.$emit("update:value",s)}}}},data:function(){return{ip:void 0}}},Q={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",[t("div",[s._v("IP框："),t("e-ip-input",{model:{value:s.ip,callback:function(a){s.ip=a},expression:"ip"}})],1),t("div",[s._v("绑定值："+s._s(s.ip))])])},staticRenderFns:[]},U=t(1)(Z,Q,!1,null,null,null).exports,K={components:{"e-ip-input":{mixins:[R.Field],template:'<div style="display: inline-block">\n                <u-input maxlength="3" v-model="parts[0]"\n                    @input="onInput()" @change="onChange()" @focus="onFocus($event)" @blur="onBlur($event)"\n                    style="width: 60px"\n                ></u-input> .\n                <u-input maxlength="3" v-model="parts[1]"\n                    @input="onInput()" @change="onChange()" @focus="onFocus($event)" @blur="onBlur($event)"\n                    style="width: 60px"\n                ></u-input> .\n                <u-input maxlength="3" v-model="parts[2]"\n                    @input="onInput()" @change="onChange()" @focus="onFocus($event)" @blur="onBlur($event)"\n                    style="width: 60px"\n                ></u-input> .\n                <u-input maxlength="3" v-model="parts[3]"\n                    @input="onInput()" @change="onChange()" @focus="onFocus($event)" @blur="onBlur($event)"\n                    style="width: 60px"\n                ></u-input>\n            </div>',props:{value:String},data:function(){return{parts:[]}},watch:{value:function(s){this.parts=s.split(".")}},methods:{onInput:function(s,a){var t=this.parts.join(".");this.$emit("input",t),this.$emit("update:value",t)},onChange:function(){var s=this.parts.join(".");this.$emit("change",{value:s})},onFocus:function(s){this.$emit("focus",s)},onBlur:function(s){this.$emit("blur",s)}}}},data:function(){return{model:{ip:void 0},rules:[{type:"string",required:!0,trigger:"blur",message:"请填写IP"},{type:"string",required:!0,message:"请填写完整的IP",validator:function(s,a,t){4===a.split(".").length?t():t(new Error(""))}},{type:"string",required:!0,trigger:"input+blur",message:"请填写数字",validator:function(s,a,t){a.split(".").every(function(s){return!isNaN(s)&&""!==s})?t():t(new Error)}},{type:"string",required:!0,trigger:"input+blur",message:"请填写0-255的数字",validator:function(s,a,t){a.split(".").every(function(s){return 0<=s&&s<256})?t():t(new Error)}}]}}},X={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("u-form",{ref:"form"},[t("u-form-item",{attrs:{label:"IP地址",required:"",rules:s.rules}},[t("e-ip-input",{model:{value:s.model.ip,callback:function(a){s.$set(s.model,"ip",a)},expression:"model.ip"}})],1),t("u-form-item",[t("u-button",{attrs:{color:"primary"},on:{click:function(a){s.$refs.form.validate().catch(function(){})}}},[s._v("提交")])],1)],1)},staticRenderFns:[]},ss={components:{Caf357d:n,Cf14b93:e,C1b381d:c,C78f0b7:u,C3f5ebf:o,C3a5f9a:g,C2a9b39:b,Ca7ed6a:w,C01868c:F,C0ac978:B,C74a27d:S,Cf2be93:Y,C383ae8:D,C79e811:W,C21e125:U,C96eb39:t(1)(K,X,!1,null,null,null).exports}},as={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("u-article",[t("h1",[s._v("表单系列")]),t("p",[s._v("一般来说，表单是Web应用中最常见，最重要，也是最复杂的交互形式之一，表单系列组件设计的好坏很大程度决定了整个应用实现的质量。")]),t("p",[s._v("表单的布局样式比较统一，但会有许多如规则验证、数据比较、数据缓存等复杂的通用逻辑。由于原生表单元素样式简陋，功能单薄，对SPA不友好，不具备处理这些复杂问题的能力，因此必须在原生元素基础上作一层封装。")]),t("h2",[s._v("相关组件")]),t("h3",[s._v("示例")]),t("p",[s._v("比如下面的例子是一个简单的填写个人信息的表单：")]),t("div",{staticClass:"u-example"},[t("u-form",[t("u-form-item",{attrs:{label:"性别"}},[t("u-radios",{attrs:{value:"男"}},[t("u-radio",{attrs:{label:"男"}},[s._v("男")]),t("u-radio",{attrs:{label:"女"}},[s._v("女")])],1)],1),t("u-form-item",{attrs:{label:"昵称",required:""}},[t("u-input",{attrs:{maxlength:"20",placeholder:"不得超过20个字符"}})],1),t("u-form-item",{attrs:{label:"手机",required:""}},[t("u-input",{attrs:{maxlength:"11",placeholder:"请输入手机号"}})],1),t("u-form-item",{attrs:{label:"自我介绍"}},[t("u-textarea")],1),t("u-form-item",[t("u-button",{attrs:{color:"primary"}},[s._v("提交")])],1)],1)],1),t("pre",{pre:!0,attrs:{class:"hljs lang-html"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"性别"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-radios")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("value")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"男"')]),s._v(">")]),s._v("\n            "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-radio")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"男"')]),s._v(">")]),s._v("男"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-radio")]),s._v(">")]),s._v("\n            "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-radio")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"女"')]),s._v(">")]),s._v("女"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-radio")]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-radios")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"昵称"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"20"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"不得超过20个字符"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"手机"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"11"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"请输入手机号"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"自我介绍"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-textarea")]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-textarea")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("color")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"primary"')]),s._v(">")]),s._v("提交"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n")])]),t("p",[s._v("根据日常经验，我们可以归纳出与表单相关的组件有以下几种：")]),t("h4",[s._v("表单 "),t("u-link",{attrs:{href:"/proto-ui/u-form"}},[s._v("Form")])],1),t("p",[s._v("用于整体布局，集中设置属性，统一暴露事件和方法。")]),t("h4",[s._v("表单组 FormGroup")]),t("p",[s._v("针对表单项进行分组，主要用于布局，可能会有分组组件常见的折叠功能。")]),t("h4",[s._v("表单项 FormItem")]),t("p",[s._v("用于排列表单标签与控件的位置，必选提示，规则验证等。")]),t("h4",[s._v("表单域（表单控件） Field")]),t("p",[s._v("作为各种表单域（表单控件）的基类，用于触发FormItem的验证等功能。")]),t("p",[s._v("比如常见的："),t("code",{pre:!0},[s._v("<u-input>")]),s._v("、"),t("code",{pre:!0},[s._v("<u-select>")]),s._v("、"),t("code",{pre:!0},[s._v("<u-radios>")]),s._v("、"),t("code",{pre:!0},[s._v("<u-date-picker>")]),s._v("等。")]),t("p",[s._v("页面上有很多组件，通常我们可以认为：")]),t("blockquote",[t("p",[s._v("如果一个组件可以通过表单对后端数据进行读写操作的，那么它就是一个"),t("strong",[s._v("表单控件")]),s._v("。")])]),t("h2",[s._v("功能设计")]),t("h3",[s._v("布局")]),t("p",[s._v("表单除了一般上面的纵向布局，某些情况也会有行内布局。")]),t("div",{staticClass:"u-example"},[t("u-form",{attrs:{layout:"inline","label-size":"auto"}},[t("u-form-item",{attrs:{label:"状态"}},[t("u-select",[t("u-select-item",[s._v("创建中")]),t("u-select-item",[s._v("成功")]),t("u-select-item",[s._v("失败")])],1)],1),t("u-form-item",{attrs:{label:"用户名"}},[t("u-input",{attrs:{maxlength:"20",placeholder:"请输入用户名"}})],1),t("u-form-item",{attrs:{label:"手机"}},[t("u-input",{attrs:{maxlength:"11",placeholder:"请输入手机"}})],1),t("u-form-item",[t("u-button",{attrs:{color:"primary"}},[s._v("查询")])],1)],1)],1),t("pre",{pre:!0,attrs:{class:"hljs lang-html"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("layout")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"inline"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label-size")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"auto"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"状态"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-select")]),s._v(">")]),s._v("\n            "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-select-item")]),s._v(">")]),s._v("创建中"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-select-item")]),s._v(">")]),s._v("\n            "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-select-item")]),s._v(">")]),s._v("成功"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-select-item")]),s._v(">")]),s._v("\n            "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-select-item")]),s._v(">")]),s._v("失败"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-select-item")]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-select")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"用户名"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"20"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"请输入用户名"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"手机"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"11"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"请输入手机"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("color")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"primary"')]),s._v(">")]),s._v("查询"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n")])]),t("p",[t("code",{pre:!0},[s._v("<u-form>")]),s._v("提供了一个"),t("code",{pre:!0},[s._v("layout")]),s._v("属性，它有两个可选值："),t("code",{pre:!0},[s._v("block")]),s._v("和"),t("code",{pre:!0},[s._v("inline")]),s._v("，以后还可能有其它的值。")]),t("h3",[s._v("验证")]),t("p",[s._v("表单验证是表单的核心功能。我们希望各个表单控件都可以统一走表单的验证流程，而不是额外编写代码。因此，设计组件的时候需考虑得尽可能通用和全面，它至少要包含以下功能：")]),t("ul",[t("li",[s._v("规则列表")]),t("li",[s._v("规则扩充")]),t("li",[s._v("异步验证")]),t("li",[s._v("触发方式")])]),t("p",[s._v("下面一一展开。")]),t("h4",[s._v("规则列表")]),t("p",[s._v("一个表单项的验证规则用一个对象来表示是不够的，因为往往不同的验证情况会有不同的提示消息和不同的触发方式。")]),t("p",[s._v("比如下面的例子，一个用户名输入框的验证规则：")]),t("ol",[t("li",[s._v("必须输入用户名，失焦验证")]),t("li",[s._v("以字母开头，实时验证")]),t("li",[s._v("字母、数字或中划线组成，实时验证")]),t("li",[s._v("以字母或数字结尾，失焦验证")]),t("li",[s._v("4~12个字符，失焦验证")])]),t("p",[s._v("我们必须用一个有序列表"),t("code",{pre:!0},[s._v("rules")]),s._v("来表示，列表中包含若干条验证规则对象。结构如下：")]),t("pre",{pre:!0,attrs:{class:"hljs lang-javascript"}},[t("code",{attrs:{"v-pre":""}},[s._v("[{ "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", ... }, { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'email'")]),s._v(", ... }, { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("pattern")]),s._v(": ... }, ...]\n")])]),t("p",[s._v("每条规则对象通常有以下几个参数：")]),t("ul",[t("li",[t("code",{pre:!0},[s._v("type")]),s._v("：数据类型")]),t("li",[t("code",{pre:!0},[s._v("trigger")]),s._v("：触发方式")]),t("li",[t("code",{pre:!0},[s._v("message")]),s._v("：验证不通过时的消息提示")]),t("li",[s._v("...")])]),t("p",[s._v("上面提到的例子可以用下面的规则列表来表示：")]),t("div",{staticClass:"u-example"},[t("u-form-item",{attrs:{label:"用户名",rules:[{type:"string",required:!0,trigger:"blur",message:"请输入用户名"},{type:"string",pattern:/^[a-zA-Z]/,trigger:"input+blur",message:"以字母开头"},{type:"string",pattern:/^[a-zA-Z0-9-]+$/,trigger:"input+blur",message:"字母、数字或中划线组成"},{type:"string",pattern:/[a-zA-Z0-9]$/,trigger:"blur",message:"以字母或数字结尾"},{type:"string",min:4,trigger:"blur",message:"不得少于4个字符"}]}},[t("u-input",{attrs:{maxlength:"112",placeholder:"4~12位字母、数字或中划线组成"}})],1)],1),t("pre",{pre:!0,attrs:{class:"hljs lang-html"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"用户名"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":rules")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v("\"[\n    { type: 'string', required: true, trigger: 'blur', message: '请输入用户名' },\n    { type: 'string', pattern: /^[a-zA-Z]/, trigger: 'input+blur', message: '以字母开头' },\n    { type: 'string', pattern: /^[a-zA-Z0-9-]+$/, trigger: 'input+blur', message: '字母、数字或中划线组成' },\n    { type: 'string', pattern: /[a-zA-Z0-9]$/, trigger: 'blur', message: '以字母或数字结尾' },\n    { type: 'string', min: 4, trigger: 'blur', message: '不得少于4个字符' },\n]\"")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"112"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"4~12位字母、数字或中划线组成"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n")])]),t("h5",[s._v("多字段的规则列表")]),t("p",[s._v("一个表单经常需要给的多个字段添加规则列表。为了方便，我们支持在"),t("code",{pre:!0},[s._v("<u-form>")]),s._v("中汇总传入，通过"),t("code",{pre:!0},[s._v("<u-form-item>")]),s._v("的"),t("code",{pre:!0},[s._v("name")]),s._v("属性来区别。")]),t("div",{staticClass:"u-example"},[t("Caf357d")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":rules")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"rules"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"用户名"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"username"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"12"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"4~12个字符"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"邮箱"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"email"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"24"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"请输入邮箱"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("rules")]),s._v(": {\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("username")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入用户名'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("min")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("4")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("max")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("12")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入4~12个字符'")]),s._v(" },\n                ],\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("email")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入邮箱'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'email'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'邮箱格式不正确'")]),s._v(" },\n                ],\n            },\n        };\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),t("h4",[s._v("规则扩充和异步验证")]),t("p",[s._v("我们使用了"),t("u-link",{attrs:{href:"https://github.com/yiminghe/async-validator"}},[s._v("async-validator")]),s._v("这个库，基本可以满足这两项功能。")],1),t("p",[s._v("比如下面的例子是关于自定义规则的，判断两次输入的密码是否一致：")]),t("div",{staticClass:"u-example"},[t("Cf14b93")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":rules")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"rules"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"密码"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"password"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"password"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("v-model")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"model.password"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"12"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"6~12个字符"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"确认密码"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"confirm"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"password"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("v-model")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"model.confirm"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"12"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"6~12个字符"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(">")]),s._v("设置"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("model")]),s._v(": {\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("password")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("''")]),s._v(",\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("confirm")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("''")]),s._v(",\n            },\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("rules")]),s._v(": {\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("password")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入密码'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("min")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("6")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("max")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("12")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'6~12个字符'")]),s._v(" },\n                ],\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("confirm")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'两次输入的密码不一致'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("validator")]),s._v(": "),t("span",{attrs:{class:"hljs-function"}},[s._v("("),t("span",{attrs:{class:"hljs-params"}},[s._v("rule, value, callback")]),s._v(") =>")]),s._v(" {\n                        value === "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".model.password ? callback() : callback("),t("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Error")]),s._v("());\n                    } },\n                ],\n            },\n        };\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),t("p",[s._v("下面的例子是关于异步验证的，判断用户名是否已被使用，尝试输入“aaaa”：")]),t("div",{staticClass:"u-example"},[t("C1b381d")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":rules")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"rules"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"用户名"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"username"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"12"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"4~12个字符"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" checkUsername = "),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v(" ("),t("span",{attrs:{class:"hljs-params"}},[s._v("username")]),s._v(") ")]),s._v("{\n    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),t("span",{attrs:{class:"hljs-function"}},[s._v("("),t("span",{attrs:{class:"hljs-params"}},[s._v("resolve, reject")]),s._v(") =>")]),s._v(" {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (["),t("span",{attrs:{class:"hljs-string"}},[s._v("'aaaa'")]),s._v(", "),t("span",{attrs:{class:"hljs-string"}},[s._v("'abcd'")]),s._v(", "),t("span",{attrs:{class:"hljs-string"}},[s._v("'1234'")]),s._v("].includes(username))\n            reject("),t("span",{attrs:{class:"hljs-string"}},[s._v("'该用户名已被使用'")]),s._v(");\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v("\n            resolve();\n    });\n};\n\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("rules")]),s._v(": {\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("username")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入用户名'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("min")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("4")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("max")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("12")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入4~12个字符'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'该用户名已被使用'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("validator")]),s._v(": "),t("span",{attrs:{class:"hljs-function"}},[s._v("("),t("span",{attrs:{class:"hljs-params"}},[s._v("rule, value, callback")]),s._v(") =>")]),s._v(" {\n                        checkUsername(value)\n                            .then("),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" callback())\n                            .catch("),t("span",{attrs:{class:"hljs-function"}},[s._v("("),t("span",{attrs:{class:"hljs-params"}},[s._v("err")]),s._v(") =>")]),s._v(" callback("),t("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Error")]),s._v("(err)));\n                    } },\n                ],\n            },\n        };\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),t("h4",[s._v("触发方式")]),t("p",[s._v("表单验证行为按照实时性通常可以分为三种：提交验证、失焦验证、实时验证，分别对应验证规则"),t("code",{pre:!0},[s._v("trigger")]),s._v("的三种触发方式："),t("code",{pre:!0},[s._v("submit")]),s._v(", "),t("code",{pre:!0},[s._v("blur")]),s._v(", "),t("code",{pre:!0},[s._v("input")]),s._v("，规则中默认为"),t("code",{pre:!0},[s._v("submit")]),s._v("。")]),t("p",[s._v("另外还有一种行为叫表单限制，不属于表单验证，但通常与之配合使用。")]),t("h5",[s._v("提交验证")]),t("p",[s._v("点击表单提交按钮时才对表单中所有控件进行验证，通常对应submit按钮的"),t("code",{pre:!0},[s._v("click")]),s._v("事件。示例如下：")]),t("div",{staticClass:"u-example"},[t("C78f0b7")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("ref")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"form"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":rules")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"rules"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"用户名"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"username"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"12"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"4~12个字符"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"邮箱"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"email"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"24"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"请输入邮箱"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("color")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"primary"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"submit()"')]),s._v(">")]),s._v("提交"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("rules")]),s._v(": {\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("username")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入用户名'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("min")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("4")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("max")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("12")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入4~12个字符'")]),s._v(" },\n                ],\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("email")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入邮箱'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'email'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'邮箱格式不正确'")]),s._v(" },\n                ],\n            },\n        };\n    },\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n        submit() {\n            "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$refs.form.validate()\n                .then("),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" alert("),t("span",{attrs:{class:"hljs-string"}},[s._v("'提交成功'")]),s._v("))\n                .catch("),t("span",{attrs:{class:"hljs-function"}},[t("span",{attrs:{class:"hljs-params"}},[s._v("()")]),s._v(" =>")]),s._v(" {});\n        },\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),t("h5",[s._v("失焦验证")]),t("p",[s._v("在表单控件失去焦点时对该控件进行验证，通常对应表单控件的"),t("code",{pre:!0},[s._v("blur")]),s._v("事件。示例如下：")]),t("div",{staticClass:"u-example"},[t("C3f5ebf")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("ref")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"form"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":rules")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"rules"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"用户名"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"username"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"12"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"4~12个字符"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"邮箱"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"email"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"24"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"请输入邮箱"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("rules")]),s._v(": {\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("username")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入用户名'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("min")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("4")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("max")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("12")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入4~12个字符'")]),s._v(" },\n                ],\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("email")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入邮箱'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'email'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'邮箱格式不正确'")]),s._v(" },\n                ],\n            },\n        };\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),t("h5",[s._v("实时验证")]),t("p",[s._v("在表单控件的值实时输入改变时，对该控件进行验证，通常对应表单的"),t("code",{pre:!0},[s._v("input")]),s._v("事件。当只激活实时验证时，失焦验证会跳过此规则并且覆盖原来的结果，因此通常我们需要采用实时与失焦叠加的方式"),t("code",{pre:!0},[s._v("input+blur")]),s._v("。")]),t("p",[s._v("下面的例子中，对用户名长度和邮箱格式的判断为实时验证。其中邮箱的验证没有采用实时与失焦叠加的方式，可以发现这种方式不是很合理。")]),t("div",{staticClass:"u-example"},[t("C3a5f9a")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("ref")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"form"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":rules")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"rules"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"用户名"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"username"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"12"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"4~12个字符"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"邮箱"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"email"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"24"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"请输入邮箱"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("rules")]),s._v(": {\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("username")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入用户名'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("min")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("4")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("max")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("12")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'input+blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入4~12个字符'")]),s._v(" },\n                ],\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("email")]),s._v(": [\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请输入邮箱'")]),s._v(" },\n                    { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'email'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'input'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'邮箱格式不正确'")]),s._v(" },\n                ],\n            },\n        };\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),t("h5",[s._v("表单限制")]),t("p",[s._v("在表单控件的值改变时，对该值限制在规定的长度、范围或者格式内，如"),t("code",{pre:!0},[s._v("<input>")]),s._v("控件的部分"),t("code",{pre:!0},[s._v("type")]),s._v("和"),t("code",{pre:!0},[s._v("maxlength")]),s._v("的限制行为等：")]),t("div",{staticClass:"u-example"},[t("u-form",[t("u-form-item",{attrs:{label:"用户名"}},[t("u-input",{attrs:{maxlength:"4",placeholder:"不超过4个字符"}})],1)],1)],1),t("pre",{pre:!0,attrs:{class:"hljs lang-html"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"用户名"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"4"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("placeholder")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"不超过4个字符"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n")])]),t("p",[s._v("关于限制格式，我们之后计划给"),t("code",{pre:!0},[s._v("<u-input>")]),s._v("实现一个"),t("code",{pre:!0},[s._v("format")]),s._v("属性。")]),t("h3",[s._v("数据比较")]),t("h3",[s._v("数据缓存")]),t("h2",[s._v("扩充控件")]),t("p",[t("code",{pre:!0},[s._v("<u-form>")]),s._v("、"),t("code",{pre:!0},[s._v("<u-form-group>")]),s._v("、"),t("code",{pre:!0},[s._v("<u-form>")]),s._v("三种组件构成一个基本的表单体系，在大部分场景可以直接使用，不需要做扩展。而表单控件在业务中是多样的，原型组件库不可能完全覆盖，有很多需要自行设计。")]),t("p",[s._v("下面会讲述，如何设计表单控件，接入到Vusion的表单体系中，从而可以统一走表单的规则验证、事件处理等通道，无需额外处理。")]),t("h3",[s._v("简单示例")]),t("p",[s._v("我们先拿一个最简单的表单控件——复选框"),t("code",{pre:!0},[s._v("<e-checkbox>")]),s._v("来举例。")]),t("h4",[s._v("结构和样式")]),t("p",[s._v("首先可以很快实现它的结构和样式。")]),t("div",{staticClass:"u-example"},[t("C2a9b39")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.root"')]),s._v(">")]),s._v("✓"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'e-checkbox'")]),s._v(",\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(">")]),t("span",{attrs:{class:"css"}},[s._v("\n"),t("span",{attrs:{class:"hljs-selector-class"}},[s._v(".root")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("display")]),s._v(": inline-block;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("user-select")]),s._v(": none;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("width")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("line-height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("16px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("border")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("1px")]),s._v(" solid "),t("span",{attrs:{class:"hljs-number"}},[s._v("#ccc")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("text-align")]),s._v(": center;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("color")]),s._v(": $brand-primary;\n}\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(">")]),s._v("\n")])]),t("h4",[s._v("属性")]),t("p",[s._v("每个表单控件总有一个核心属性，通常用于绑定数据，比如：")]),t("ul",[t("li",[t("code",{pre:!0},[s._v("<u-checkbox>")]),s._v("可以有一个表示选中状态的"),t("code",{pre:!0},[s._v("checked")]),s._v("属性")]),t("li",[t("code",{pre:!0},[s._v("<u-date-picker>")]),s._v("可以有一个表示日期的"),t("code",{pre:!0},[s._v("date")]),s._v("属性")]),t("li",[t("code",{pre:!0},[s._v("<u-number-input>")]),s._v("可以有一个表示数字的"),t("code",{pre:!0},[s._v("number")]),s._v("属性")])]),t("p",[s._v("但在Vusion中，我们推荐统一使用"),t("code",{pre:!0},[s._v("value")]),s._v("属性来处理，因为：")]),t("ul",[t("li",[s._v("经常有对表单控件做统一处理的情形，比如有的时候你可能需要遍历："),t("code",{pre:!0},[s._v("form.fields.map((field) => field.value)")])]),t("li",[s._v("为了与Vue的"),t("code",{pre:!0},[s._v("v-model")]),s._v("保持一致（虽然它也支持自定义）")]),t("li",[s._v("有时实在想不出什么好的名字，不如直接用"),t("code",{pre:!0},[s._v("value")]),s._v("也不显得混乱")])]),t("p",[s._v("因此，我们给上面的示例添加属性：")]),t("div",{staticClass:"u-example"},[t("Ca7ed6a")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.root"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"value = !value"')]),s._v(">")]),s._v("{{ value ? '✓' : '&nbsp;' }}"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'e-checkbox'")]),s._v(",\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("props")]),s._v(": {\n        "),t("span",{attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Boolean")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("default")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(" },\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(">")]),t("span",{attrs:{class:"css"}},[s._v("\n"),t("span",{attrs:{class:"hljs-selector-class"}},[s._v(".root")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("display")]),s._v(": inline-block;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("user-select")]),s._v(": none;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("width")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("line-height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("16px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("border")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("1px")]),s._v(" solid "),t("span",{attrs:{class:"hljs-number"}},[s._v("#ccc")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("text-align")]),s._v(": center;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("color")]),s._v(": $brand-primary;\n}\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(">")]),s._v("\n")])]),t("h4",[s._v("单向流与双向绑定")]),t("p",[s._v("熟悉Vue的童鞋都知道，Vue2.x为了保证单向数据流，放弃了1.x的双向绑定机制。这是好事，因为不用担心内部组件悄悄地改变父组件的状态。")]),t("p",[s._v("但与此同时，也给我们的组件设计稍微带来点不便：对于一个属性，我们往往需要两个变量来维护。")]),t("p",[s._v("比如在上面的例子中，我们只有一个prop，当点击复选框时，Vue却不允许修改这个属性。所以我们还需要一个data变量来维护实际的内部状态。")]),t("h5",[s._v("命名规范")]),t("p",[s._v("这里就牵扯到一个命名规范了。prop中一个"),t("code",{pre:!0},[s._v("value")]),s._v("，data中一个"),t("code",{pre:!0},[s._v("value")]),s._v("，名字重复，怎么定义比较好？")]),t("pre",{pre:!0,attrs:{class:"hljs lang-javascript"}},[t("code",{attrs:{"v-pre":""}},[s._v("{\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("props")]),s._v(": {\n        "),t("span",{attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Boolean")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("default")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(" },\n    },\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(" };\n    },\n}\n")])]),t("p",[s._v("首先，"),t("code",{pre:!0},[s._v("value")]),s._v("和"),t("code",{pre:!0},[s._v("_value")]),s._v("是不行的，因为Vue不会对"),t("code",{pre:!0},[s._v("_")]),s._v("开头的变量做依赖管理。然后，有的组件库中是用"),t("code",{pre:!0},[s._v("initValue")]),s._v("或者"),t("code",{pre:!0},[s._v("defaultValue")]),s._v("来表示prop，用"),t("code",{pre:!0},[s._v("value")]),s._v("来表示data，我认为这样也不合理，因为prop也是会变的，不一定是一个默认值或初始值。")]),t("p",[s._v("我们更倾向组件暴露的API简洁友好，所以还是决定对data下手。Vusion中规定与prop相关的那个data变量，在前面加上"),t("code",{pre:!0},[s._v("current")]),s._v("前缀，表示当前的一种状态。比如"),t("code",{pre:!0},[s._v("currentValue")]),s._v("变量对应"),t("code",{pre:!0},[s._v("value")]),s._v("属性，"),t("code",{pre:!0},[s._v("currentPage")]),s._v("变量对应"),t("code",{pre:!0},[s._v("page")]),s._v("属性，"),t("code",{pre:!0},[s._v("currentExpanded")]),s._v("变量对应"),t("code",{pre:!0},[s._v("expanded")]),s._v("属性等。")]),t("h5",[s._v("监听属性")]),t("p",[s._v("这里需要注意的是，当变成两个变量的时候，外部传入的状态与内部状态分离，也就是说内部状态不会响应外部状态的变更。这时需要一个额外的watcher来处理。")]),t("p",[s._v("考虑到这几点，示例修改为下面的形式：")]),t("div",{staticClass:"u-example"},[t("C01868c")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.root"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"currentValue = !currentValue"')]),s._v(">")]),s._v("{{ currentValue ? '✓' : '&nbsp;' }}"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'e-checkbox'")]),s._v(",\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("props")]),s._v(": {\n        "),t("span",{attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Boolean")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("default")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(" },\n    },\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("currentValue")]),s._v(": "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".value,\n        };\n    },\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("watch")]),s._v(": {\n        value(value) {\n            "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".currentValue = value;\n        },\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(">")]),t("span",{attrs:{class:"css"}},[s._v("\n"),t("span",{attrs:{class:"hljs-selector-class"}},[s._v(".root")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("display")]),s._v(": inline-block;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("user-select")]),s._v(": none;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("width")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("line-height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("16px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("border")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("1px")]),s._v(" solid "),t("span",{attrs:{class:"hljs-number"}},[s._v("#ccc")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("text-align")]),s._v(": center;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("color")]),s._v(": $brand-primary;\n}\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(">")]),s._v("\n")])]),t("h5",[s._v("双向绑定")]),t("p",[s._v("最后，为了让组件使用起来更方便，Vue2提供了"),t("code",{pre:!0},[s._v("v-model")]),s._v("和"),t("code",{pre:!0},[s._v(".sync")]),s._v("两种双向绑定语法糖，只需添加两个事件即可。")]),t("p",[t("em",[s._v("下面的例子为了让大家更好地观察双向绑定，将"),t("code",{pre:!0},[s._v("<e-checkbox>")]),s._v("组件的代码放入了components中。")])]),t("div",{staticClass:"u-example"},[t("C0ac978")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("复选框："),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("e-checkbox")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.checkbox"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("v-model")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"checked"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("e-checkbox")]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("绑定值：{{ checked }}"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"actionscript"}},[s._v("\nexport "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    components: {\n        "),t("span",{attrs:{class:"hljs-string"}},[s._v("'e-checkbox'")]),s._v(": {\n            template: `<div @click="),t("span",{attrs:{class:"hljs-string"}},[s._v('"check()"')]),s._v(">{{ currentValue ? "),t("span",{attrs:{class:"hljs-string"}},[s._v("'✓'")]),s._v(" : "),t("span",{attrs:{class:"hljs-string"}},[s._v("'&nbsp;'")]),s._v(" }}</div>`,\n            props: {\n                value: { type: Boolean, "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(" },\n            },\n            data() {\n                "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n                    currentValue: "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".value,\n                };\n            },\n            watch: {\n                value(value) {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".currentValue = value;\n                },\n            },\n            methods: {\n                check() {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" currentValue = "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".currentValue = !"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".currentValue;\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'input'")]),s._v(", currentValue);\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'update:value'")]),s._v(", currentValue);\n                }\n            },\n        },\n    },\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" { checked: "),t("span",{attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(" };\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(">")]),t("span",{attrs:{class:"css"}},[s._v("\n"),t("span",{attrs:{class:"hljs-selector-class"}},[s._v(".checkbox")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("display")]),s._v(": inline-block;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("user-select")]),s._v(": none;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("width")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("line-height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("16px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("border")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("1px")]),s._v(" solid "),t("span",{attrs:{class:"hljs-number"}},[s._v("#ccc")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("text-align")]),s._v(": center;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("color")]),s._v(": $brand-primary;\n}\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(">")]),s._v("\n")])]),t("h4",[s._v("继承Field")]),t("p",[s._v("到目前为止，我们仅仅是描述了如何按规范实现了一个表单控件，但还没有与Vusion的表单体系联系在一起。")]),t("p",[s._v("有关触发验证等功能已经封装在"),t("code",{pre:!0},[s._v("<u-field>")]),s._v("这个基类组件（或叫Mixin）中了，我们要做的只需继承一下它即可。")]),t("p",[s._v("下面是一个很简单的复选框与表单验证相关的例子——验证是否同意了服务条款。")]),t("div",{staticClass:"u-example"},[t("C74a27d")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("ref")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"form"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"复选框"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":rules")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"rules"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("e-checkbox")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.checkbox"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("e-checkbox")]),s._v(">")]),s._v(" 同意并遵守服务条款\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("color")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"primary"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$refs.form.validate()"')]),s._v(">")]),s._v("提交"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" { Field } "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{attrs:{class:"hljs-string"}},[s._v("'proto-ui.vusion'")]),s._v(";\n\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("components")]),s._v(": {\n        "),t("span",{attrs:{class:"hljs-string"}},[s._v("'e-checkbox'")]),s._v(": {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("mixins")]),s._v(": [Field],\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("template")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("`<div @click=\"check()\">{{ currentValue ? '✓' : '&nbsp;' }}</div>`")]),s._v(",\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("props")]),s._v(": {\n                "),t("span",{attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Boolean")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("default")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(" },\n            },\n            data() {\n                "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n                    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("currentValue")]),s._v(": "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".value,\n                };\n            },\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("watch")]),s._v(": {\n                value(value) {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".currentValue = value;\n                },\n            },\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n                check() {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" currentValue = "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".currentValue = !"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".currentValue;\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'input'")]),s._v(", currentValue);\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'update:value'")]),s._v(", currentValue);\n                }\n            },\n        },\n    },\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("rules")]),s._v(": [\n                { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'boolean'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("trigger")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'input'")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'您还未接受服务条款'")]),s._v(", validator(rule, value, callback) {\n                    value ? callback() : callback("),t("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Error")]),s._v("("),t("span",{attrs:{class:"hljs-literal"}},[s._v("false")]),s._v("));\n                } },\n            ],\n        };\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(">")]),t("span",{attrs:{class:"css"}},[s._v("\n"),t("span",{attrs:{class:"hljs-selector-class"}},[s._v(".checkbox")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("display")]),s._v(": inline-block;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("user-select")]),s._v(": none;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("width")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("line-height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("16px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("border")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("1px")]),s._v(" solid "),t("span",{attrs:{class:"hljs-number"}},[s._v("#ccc")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("text-align")]),s._v(": center;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("color")]),s._v(": $brand-primary;\n}\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(">")]),s._v("\n")])]),t("h4",[s._v("事件")]),t("p",[s._v("上面我们只抛了一个"),t("code",{pre:!0},[s._v("input")]),s._v("事件。为了保证功能实现的完整性与一致性，对于一个表单控件，我们最好暴露这4种事件："),t("code",{pre:!0},[s._v("input")]),s._v("、"),t("code",{pre:!0},[s._v("change")]),s._v("、"),t("code",{pre:!0},[s._v("focus")]),s._v("和"),t("code",{pre:!0},[s._v("blur")]),s._v("。")]),t("p",[s._v("对于组件中有focusable的元素，我们照着抛出来就行；如果没有的话，我们可以用"),t("code",{pre:!0},[s._v("tabindex")]),s._v("来设置。")]),t("div",{staticClass:"u-example"},[t("Cf2be93")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.root"')]),s._v("\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"check()"')]),s._v("\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("tabindex")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"0"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("@keydown.space.prevent")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("@keyup.space.prevent")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"check()"')]),s._v("\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("@focus")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onFocus"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("@blur")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onBlur"')]),s._v("\n>")]),s._v("{{ currentValue ? '✓' : '&nbsp;' }}"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" { Field } "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{attrs:{class:"hljs-string"}},[s._v("'proto-ui.vusion'")]),s._v(";\n\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'e-checkbox'")]),s._v(",\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("mixins")]),s._v(": [Field],\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("props")]),s._v(": {\n        "),t("span",{attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": { "),t("span",{attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("Boolean")]),s._v(", "),t("span",{attrs:{class:"hljs-attr"}},[s._v("default")]),s._v(": "),t("span",{attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(" },\n    },\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("currentValue")]),s._v(": "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".value,\n        };\n    },\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("watch")]),s._v(": {\n        value(value) {\n            "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".currentValue = value;\n        },\n    },\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n        onFocus(e) {\n            "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'focus'")]),s._v(", e);\n        },\n        onBlur(e) {\n            "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", e);\n        },\n        check() {\n            "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" currentValue = "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".currentValue = !"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".currentValue;\n            "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'input'")]),s._v(", currentValue);\n            "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'update:value'")]),s._v(", currentValue);\n        }\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(">")]),t("span",{attrs:{class:"css"}},[s._v("\n"),t("span",{attrs:{class:"hljs-selector-class"}},[s._v(".root")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("display")]),s._v(": inline-block;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("user-select")]),s._v(": none;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("width")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("18px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("line-height")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("16px")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("border")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("1px")]),s._v(" solid "),t("span",{attrs:{class:"hljs-number"}},[s._v("#ccc")]),s._v(";\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("text-align")]),s._v(": center;\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("color")]),s._v(": $brand-primary;\n}\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(">")]),s._v("\n")])]),t("h3",[s._v("复杂示例")]),t("p",[s._v("再举一个复杂一点的例子，假设我们需要一个用户填写IP的表单控件"),t("code",{pre:!0},[s._v("<e-ip-input>")]),s._v("，表单提交时要求验证IP格式的正确性。")]),t("h4",[s._v("结构和样式")]),t("p",[s._v("同样，可以很快产出这个组件的结构和样式。")]),t("div",{staticClass:"u-example"},[t("C383ae8")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.root"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.input"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v(" .\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.input"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v(" .\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.input"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v(" .\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.input"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'e-ip-input'")]),s._v(",\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(">")]),t("span",{attrs:{class:"css"}},[s._v("\n"),t("span",{attrs:{class:"hljs-selector-class"}},[s._v(".root")]),s._v(" {}\n\n"),t("span",{attrs:{class:"hljs-selector-class"}},[s._v(".input")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("width")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("60px")]),s._v(";\n}\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(">")]),s._v("\n")])]),t("h4",[s._v("属性")]),t("p",[s._v("根据之前的约定，核心属性我们取"),t("code",{pre:!0},[s._v("value")]),s._v("而不是"),t("code",{pre:!0},[s._v("ip")]),s._v("。")]),t("div",{staticClass:"u-example"},[t("C79e811")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.root"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.input"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("v-model")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[0]"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v(" .\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.input"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("v-model")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[1]"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v(" .\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.input"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("v-model")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[2]"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v(" .\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":class")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$style.input"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("maxlength")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("v-model")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[3]"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-input")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"javascript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{attrs:{class:"hljs-string"}},[s._v("'e-ip-input'")]),s._v(",\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("props")]),s._v(": {\n        "),t("span",{attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": "),t("span",{attrs:{class:"hljs-built_in"}},[s._v("String")]),s._v("\n    },\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            "),t("span",{attrs:{class:"hljs-attr"}},[s._v("parts")]),s._v(": [],\n        };\n    },\n    "),t("span",{attrs:{class:"hljs-attr"}},[s._v("watch")]),s._v(": {\n        value(value) {\n            "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".parts = value.split("),t("span",{attrs:{class:"hljs-string"}},[s._v("'.'")]),s._v(");\n        },\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("module")]),s._v(">")]),t("span",{attrs:{class:"css"}},[s._v("\n"),t("span",{attrs:{class:"hljs-selector-class"}},[s._v(".root")]),s._v(" {}\n\n"),t("span",{attrs:{class:"hljs-selector-class"}},[s._v(".input")]),s._v(" {\n    "),t("span",{attrs:{class:"hljs-attribute"}},[s._v("width")]),s._v(": "),t("span",{attrs:{class:"hljs-number"}},[s._v("60px")]),s._v(";\n}\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("style")]),s._v(">")]),s._v("\n")])]),t("h4",[s._v("单向流与双向绑定")]),t("p",[t("em",[s._v("下面的例子为了让大家更好地观察双向绑定，将"),t("code",{pre:!0},[s._v("<e-checkbox>")]),s._v("组件的代码放入了components中。")])]),t("div",{staticClass:"u-example"},[t("C21e125")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("IP框："),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("e-ip-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("v-model")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"ip"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("e-ip-input")]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("绑定值：{{ ip }}"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"actionscript"}},[s._v("\nexport "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    components: {\n        "),t("span",{attrs:{class:"hljs-string"}},[s._v("'e-ip-input'")]),s._v(": {\n            template: `<div style="),t("span",{attrs:{class:"hljs-string"}},[s._v('"display: inline-block"')]),s._v(">\n                <u-input maxlength="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" v-model="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[0]"')]),s._v(" @input="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onInput()"')]),s._v(" style="),t("span",{attrs:{class:"hljs-string"}},[s._v('"width: 60px"')]),s._v("></u-input> .\n                <u-input maxlength="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" v-model="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[1]"')]),s._v(" @input="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onInput()"')]),s._v(" style="),t("span",{attrs:{class:"hljs-string"}},[s._v('"width: 60px"')]),s._v("></u-input> .\n                <u-input maxlength="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" v-model="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[2]"')]),s._v(" @input="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onInput()"')]),s._v(" style="),t("span",{attrs:{class:"hljs-string"}},[s._v('"width: 60px"')]),s._v("></u-input> .\n                <u-input maxlength="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" v-model="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[3]"')]),s._v(" @input="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onInput()"')]),s._v(" style="),t("span",{attrs:{class:"hljs-string"}},[s._v('"width: 60px"')]),s._v("></u-input>\n            </div>`,\n            props: {\n                value: String\n            },\n            data() {\n                "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n                    parts: [],\n                };\n            },\n            watch: {\n                value(value) {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".parts = value.split("),t("span",{attrs:{class:"hljs-string"}},[s._v("'.'")]),s._v(");\n                },\n            },\n            methods: {\n                onInput() {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" value = "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".parts.join("),t("span",{attrs:{class:"hljs-string"}},[s._v("'.'")]),s._v(");\n\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'input'")]),s._v(", value);\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'update:value'")]),s._v(", value);\n                },\n            },\n        },\n    },\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" { ip: "),t("span",{attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(" };\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),t("h4",[s._v("继承Field并补全事件")]),t("div",{staticClass:"u-example"},[t("C96eb39")],1),t("pre",{pre:!0,attrs:{class:"hljs lang-vue"}},[t("code",{attrs:{"v-pre":""}},[t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("ref")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"form"')]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("label")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"IP地址"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("required")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v(":rules")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"rules"')]),s._v(">")]),s._v("\n        "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("e-ip-input")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("v-model")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"model.ip"')]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("e-ip-input")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n    "),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("color")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"primary"')]),s._v(" "),t("span",{attrs:{class:"hljs-attr"}},[s._v("@click")]),s._v("="),t("span",{attrs:{class:"hljs-string"}},[s._v('"$refs.form.validate().catch(() => {})"')]),s._v(">")]),s._v("提交"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-button")]),s._v(">")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form-item")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("u-form")]),s._v(">")]),s._v("\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{attrs:{class:"actionscript"}},[s._v("\n"),t("span",{attrs:{class:"hljs-meta"}},[t("span",{attrs:{class:"hljs-meta-keyword"}},[s._v("import")]),s._v(" { Field } from 'proto-ui.vusion';")]),s._v("\n\nexport "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    components: {\n        "),t("span",{attrs:{class:"hljs-string"}},[s._v("'e-ip-input'")]),s._v(": {\n            mixins: [Field],\n            template: `<div style="),t("span",{attrs:{class:"hljs-string"}},[s._v('"display: inline-block"')]),s._v(">\n                <u-input maxlength="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" v-model="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[0]"')]),s._v("\n                    @input="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onInput()"')]),s._v(" @change="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onChange()"')]),s._v(" @focus="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onFocus($event)"')]),s._v(" @blur="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onBlur($event)"')]),s._v("\n                    style="),t("span",{attrs:{class:"hljs-string"}},[s._v('"width: 60px"')]),s._v("\n                ></u-input> .\n                <u-input maxlength="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" v-model="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[1]"')]),s._v("\n                    @input="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onInput()"')]),s._v(" @change="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onChange()"')]),s._v(" @focus="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onFocus($event)"')]),s._v(" @blur="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onBlur($event)"')]),s._v("\n                    style="),t("span",{attrs:{class:"hljs-string"}},[s._v('"width: 60px"')]),s._v("\n                ></u-input> .\n                <u-input maxlength="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" v-model="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[2]"')]),s._v("\n                    @input="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onInput()"')]),s._v(" @change="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onChange()"')]),s._v(" @focus="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onFocus($event)"')]),s._v(" @blur="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onBlur($event)"')]),s._v("\n                    style="),t("span",{attrs:{class:"hljs-string"}},[s._v('"width: 60px"')]),s._v("\n                ></u-input> .\n                <u-input maxlength="),t("span",{attrs:{class:"hljs-string"}},[s._v('"3"')]),s._v(" v-model="),t("span",{attrs:{class:"hljs-string"}},[s._v('"parts[3]"')]),s._v("\n                    @input="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onInput()"')]),s._v(" @change="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onChange()"')]),s._v(" @focus="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onFocus($event)"')]),s._v(" @blur="),t("span",{attrs:{class:"hljs-string"}},[s._v('"onBlur($event)"')]),s._v("\n                    style="),t("span",{attrs:{class:"hljs-string"}},[s._v('"width: 60px"')]),s._v("\n                ></u-input>\n            </div>`,\n            props: {\n                value: String\n            },\n            data() {\n                "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n                    parts: [],\n                };\n            },\n            watch: {\n                value(value) {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".parts = value.split("),t("span",{attrs:{class:"hljs-string"}},[s._v("'.'")]),s._v(");\n                },\n            },\n            methods: {\n                onInput(partValue, index) {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" value = "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".parts.join("),t("span",{attrs:{class:"hljs-string"}},[s._v("'.'")]),s._v(");\n\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'input'")]),s._v(", value);\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'update:value'")]),s._v(", value);\n                },\n                onChange() {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" value = "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".parts.join("),t("span",{attrs:{class:"hljs-string"}},[s._v("'.'")]),s._v(");\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'change'")]),s._v(", {\n                        value,\n                    });\n                },\n                onFocus(e) {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'focus'")]),s._v(", e);\n                },\n                onBlur(e) {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".$emit("),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", e);\n                },\n            },\n        },\n    },\n    data() {\n        "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n            model: {\n                ip: "),t("span",{attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(",\n            },\n            rules: [\n                { type: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", required: "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", trigger: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'blur'")]),s._v(", message: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请填写IP'")]),s._v(" },\n                { type: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", required: "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", message: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请填写完整的IP'")]),s._v(", validator(rule, value, callback) {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" parts = value.split("),t("span",{attrs:{class:"hljs-string"}},[s._v("'.'")]),s._v(");\n                    parts.length === "),t("span",{attrs:{class:"hljs-number"}},[s._v("4")]),s._v(" ? callback() : callback("),t("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Error("),t("span",{attrs:{class:"hljs-string"}},[s._v("''")]),s._v("));\n                } },\n                { type: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", required: "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", trigger: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'input+blur'")]),s._v(", message: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请填写数字'")]),s._v(", validator(rule, value, callback) {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" parts = value.split("),t("span",{attrs:{class:"hljs-string"}},[s._v("'.'")]),s._v(");\n                    parts.every((part) => !isNaN(part) && part !== "),t("span",{attrs:{class:"hljs-string"}},[s._v("''")]),s._v(") ? callback() : callback("),t("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Error());\n                } },\n                { type: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'string'")]),s._v(", required: "),t("span",{attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(", trigger: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'input+blur'")]),s._v(", message: "),t("span",{attrs:{class:"hljs-string"}},[s._v("'请填写0-255的数字'")]),s._v(", validator(rule, value, callback) {\n                    "),t("span",{attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" parts = value.split("),t("span",{attrs:{class:"hljs-string"}},[s._v("'.'")]),s._v(");\n                    parts.every((part) => "),t("span",{attrs:{class:"hljs-number"}},[s._v("0")]),s._v(" <= part && part < "),t("span",{attrs:{class:"hljs-number"}},[s._v("256")]),s._v(") ? callback() : callback("),t("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" Error());\n                } },\n            ]\n        };\n    },\n};\n")]),t("span",{attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])]),t("h2",[s._v("FAQ")]),t("h4",[s._v("为什么要将验证逻辑放在"),t("code",{pre:!0},[s._v("<u-form-item>")]),s._v("而不是"),t("code",{pre:!0},[s._v("<u-field>")]),s._v("中？")]),t("p",[s._v("验证有一部分功能\b是关于消息提示的，这牵扯到模板的实现。如果验证逻辑放在"),t("code",{pre:!0},[s._v("<u-field>")]),s._v("中，那么就要求每个子类的模板都要实现这部分功能。一个组件最好只干一件事情，所以我们把它划到了"),t("code",{pre:!0},[s._v("<u-form-item>")]),s._v("中，虽然要添加一些组件间的通信逻辑，但这些都是必要的。")])])},staticRenderFns:[]},ts=t(1)(ss,as,!1,null,null,null);a.default=ts.exports}});